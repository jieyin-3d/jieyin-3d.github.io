---
import type { Hero as HeroProps, SocialLink as SocialLinkProps } from '../types';
import CustomImage from './CustomImage.astro';
import SocialLink from './SocialLink.astro';

type Props = HeroProps & {
    socialLinks?: SocialLinkProps[];
};

const { title, text, avatar, backgroundImage, socialLinks } = Astro.props;
---

{
    (title || text || avatar?.src) && (
        <>
            {backgroundImage?.src && (
                <CustomImage
                    {...backgroundImage}
                    class="absolute inset-0 object-cover w-full h-full pointer-events-none opacity-20"
                    sizes="100vw"
                    widths={[640, 960, 1280, 1600, 1920]}
                    fetchpriority="high"
                    loading="eager"
                />
            )}
            <section class="relative px-4 py-12 sm:px-8 sm:py-16">
                <div class="flex flex-col items-center w-full max-w-3xl mx-auto text-center">
                    {avatar?.src && (
                        <div class="p-6 mb-6">
                            <CustomImage
                                {...avatar}
                                class="object-cover w-32 border-2 rounded-full border-primary shadow-avatar aspect-square"
                                width={128}
                                height={128}
                                widths={[128, 256]}
                                sizes="128px"
                                fetchpriority="high"
                                loading="eager"
                            />
                        </div>
                    )}
                    {title && <h1 class="text-4xl font-bold text-slate-900 sm:text-5xl">{title}</h1>}
                    {text && <p class:list={['text-slate-700 sm:text-lg', { 'mt-4': title }]}>{text}</p>}
                    {socialLinks && socialLinks.length > 0 && (
                        <div class:list={['flex flex-wrap justify-center gap-x-4 gap-y-3', { 'mt-8': title || text }]}>
                            {socialLinks.map((link) => (
                                <SocialLink {...link} class="bg-white hover:bg-primary hover:shadow-button text-slate-700 hover:text-white" />
                            ))}
                        </div>
                    )}
                </div>
            </section>
        </>
    )
}
